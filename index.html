<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <title>–ú–∏–Ω–∏–π 15 –ù–æ–º - –£–Ω—à–∏–∂ —Å—É—Ä—Ü–≥–∞–∞—è üìö</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background-color: #f0f7ff; display: flex; flex-direction: column; align-items: center; padding: 20px; min-height: 100vh; margin: 0; }
        .score-board { font-size: 32px; font-weight: bold; color: #ee5253; background: white; padding: 15px 40px; border-radius: 30px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); margin-bottom: 20px; border: 4px solid #ff9f43; }
        .menu-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; max-width: 1100px; width: 100%; }
        .book-card { background: white; padding: 20px; border-radius: 25px; text-align: center; cursor: pointer; border: 4px solid #48dbfb; transition: 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .book-card:hover { transform: translateY(-5px); border-color: #ff9f43; background: #fffaf0; }
        .book-emoji { font-size: 40px; margin-bottom: 5px; display: block; }
        .book-title { font-size: 18px; font-weight: bold; color: #2d3436; }
        #reader { display: none; background: white; width: 95%; max-width: 900px; padding: 40px; border-radius: 50px; box-shadow: 0 20px 60px rgba(0,0,0,0.1); text-align: center; border: 10px solid #ff9f43; position: relative; margin-top: 20px; }
        .word { display: inline-block; cursor: pointer; padding: 5px 10px; border-radius: 12px; font-size: 38px; font-weight: 700; color: #2d3436; margin: 5px; border-bottom: 3px dashed #eee; transition: 0.2s; }
        .word.playing { background-color: #ffeaa7; transform: scale(1.1); }
        .word.correct { background-color: #55efc4 !important; color: white !important; }
        .back-btn { padding: 10px 20px; cursor: pointer; background: #636e72; color: white; border-radius: 20px; border: none; font-weight: bold; margin-bottom: 20px; }
        .mic-btn { padding: 20px 50px; font-size: 24px; background: #ff7675; color: white; border: none; border-radius: 50px; cursor: pointer; margin-top: 25px; font-weight: bold; }
        .mic-btn.active { background: #55efc4; box-shadow: 0 0 20px #55efc4; }
        #status { margin-top: 15px; font-size: 18px; color: #636e72; font-style: italic; }
    </style>
</head>
<body>

<div class="score-board">–ú–∏–Ω–∏–π –æ–Ω–æ–æ: <span id="total-score">0</span> ‚≠ê</div>

<div id="menu" class="menu-grid"></div>

<div id="reader">
    <button class="back-btn" onclick="showMenu()">‚¨ÖÔ∏è –ë—É—Ü–∞—Ö</button>
    <h1 id="reader-title" class="word" style="color: #ff9f43; border-bottom: none; display: block; margin-bottom: 30px;"></h1>
    <div id="reader-content"></div>
    <button id="mic-btn" class="mic-btn" onclick="startListening()">üé§ “Æ–≥—ç—ç —Ö—ç–ª—ç—ç—Ä—ç–π</button>
    <div id="status">“Æ–≥ –¥—ç—ç—Ä –¥–∞—Ä–∂ —Å–æ–Ω—Å–æ–æ–¥, –º–∏–∫—Ä–æ—Ñ–æ–Ω –¥—ç—ç—Ä –¥–∞—Ä–∂ —Ö—ç–ª—ç—ç—Ä—ç–π.</div>
</div>

<script>
    const allStories = [
        { title: "–®–∏–Ω—ç –Ω–æ–º", emoji: "üìñ", text: "–•–∞—à —à–∏–Ω—ç –Ω–æ–º –∞–≤–ª–∞–∞. –®–∏–Ω—ç –Ω–æ–º–æ–æ —É–Ω—à–∏–≤. –ù–æ–º —É–Ω—à–∏—Ö —Å–∞–π—Ö–∞–Ω. –®“Ø—Ä—ç—ç –æ–ª–æ–Ω —à–∏–Ω—ç –Ω–æ–º —É–Ω—à—Å–∞–Ω. –ù–æ–º –∏—Ö —É–Ω—à–∞–∞—Ä–∞–π." }, //
        { title: "–ü–∏–Ω–≥–≤–∏–Ω", emoji: "üêß", text: "–ü–∏–Ω–≥–≤–∏–Ω –±–æ–ª ”©–º–Ω”©–¥ —Ç—É–π–ª–¥ –∞–º—å–¥–∞—Ä–¥–∞–≥ —à—É–≤—É—É. –≠–Ω—ç —à—É–≤—É—É–Ω—ã ”©–≤—á“Ø“Ø —Ü—ç—ç–∂ –Ω—å —Ü–∞–≥–∞–∞–Ω, –Ω—É—Ä—É—É –Ω—å —Ö–∞—Ä. –ü–∏–Ω–≥–≤–∏–Ω –¥–∞–ª–∞–≤—á—Ç–∞–π –±–æ–ª–æ–≤—á –Ω–∏—Å–¥—ç–≥–≥“Ø–π. –•–∞—Ä–∏–Ω —É—Å–∞–Ω–¥ —Å–∞–π–Ω —Å—ç–ª–¥—ç–≥. –ü–∏–Ω–≥–≤–∏–Ω –∑–∞–≥–∞—Å–∞–∞—Ä —Ö–æ–æ–ª–ª–æ–Ω–æ. –ü–∏–Ω–≥–≤–∏–Ω–∏–π–≥ –º–æ–Ω–≥–æ–ª—á—É—É–¥ –æ—Ü–æ–Ω —à—É–≤—É—É –≥—ç–¥—ç–≥." }, //
        { title: "–Æ “Ø—Å—ç–≥", emoji: "üî§", text: "–Æ “Ø—Å—ç–≥ –Æ–Ω–¥—ç–Ω, –Æ–º–∂–∞–≤, –Æ–º—á–∏–Ω, –Æ–º–∂–∏—Ä –≥—ç—Ö –º—ç—Ç —Ö“Ø–Ω–∏–π –Ω—ç—Ä–∏–π–Ω —ç—Ö—ç–Ω–¥ –±–∞–π–Ω–∞. –ë–∞—Å —é “Ø—Å—ç–≥ –Ω—å –û—é—É–Ω, –ê—é—É—Ä, –ê—é—É—à –≥—ç—Ö –º—ç—Ç –Ω—ç—Ä–∏–π–Ω –¥—É–Ω–¥ –æ—Ä–Ω–æ. –•–∞—Ä–∏–Ω —Ö“Ø–Ω–∏–π –Ω—ç—Ä–∏–π–Ω —Ç”©–≥—Å–≥”©–ª–¥ –æ—Ä–æ—Ö–≥“Ø–π." }, //
        { title: "–¢“Ø“Ø–≤—ç—Ä ”©–≥“Ø“Ø–ª–±—ç—Ä", emoji: "üìù", text: "–ë“Ø–≥–¥—ç—ç—Ä—ç—ç –Ω–æ–º–æ–æ —É–Ω—à—ä—è. –¢–æ–æ–≥–æ–æ —Ö—É—Ä–¥–∞–Ω –±–æ–¥—ä—ë. –•–∏—á—ç—ç–ª—ç—ç —Å–∞–π–Ω –¥–∞–≤—Ç—ä—è. –î—É—É —à“Ø–ª—ç–≥ —Å—É—Ä—ä—è. –¶—ç–≤—ç—Ä –∞–≥–∞–∞—Ä—Ç —è–≤—ä—è. –®”©–Ω–∏–π–Ω –æ–¥–¥—ã–≥ —Ö–∞—Ä—ä—è." }, //
        { title: "–ó–∞–∞–Ω—ã —Å–æ—ë–æ", emoji: "üêò", text: "–ó–∞–∞–Ω —Ö–∞–ª—É—É–Ω –æ—Ä–æ–Ω–¥ –∞–º—å–¥–∞—Ä–¥–∞–≥. –£—Ä—Ç —Ö–æ—ë—Ä —Å–æ—ë–æ—Ç–æ–π. –ó–∞–∞–Ω—ã —Å–æ—ë–æ–≥–æ–æ—Ä –≥–æ—ë–ª —á–∏–º—ç–≥–ª—ç–ª —Ö–∏–π–¥—ç–≥. –ó–∞–∞–Ω—ã —è—Å–∞–Ω —Å–∏–π–ª–±—ç—Ä –≥–æ—ë." }, //
        { title: "–Ø—Ä–≥—É–π", emoji: "üå∏", text: "–Ø—Ä–≥—É–π –±–æ–ª —Ü—ç–Ω—Ö—ç—Ä, —à–∞—Ä ”©–Ω–≥”©—Ç—ç–π —Ü—ç—Ü—ç–≥. –®–∞—Ä —è—Ä–≥—É–π —É—É–ª—ã–Ω —Ö—è—Ä–¥–∞–∞—Ä —É—Ä–≥–∞–¥–∞–≥. –¶—ç–Ω—Ö—ç—Ä —è—Ä–≥—É–π —Ö—ç—ç—Ä —Ç–∞–ª, —É—É–ª—ã–Ω –±—ç–ª–¥ —É—Ä–≥–∞–Ω–∞. –Ø—Ä–≥—É–π–≥ —ç–º–∏–π–Ω —É—Ä–≥–∞–º–∞–ª –±–æ–ª–≥–æ–Ω –∞—à–∏–≥–ª–∞–¥–∞–≥. –Ø–º–∞–∞ —è—Ä–≥—É–π–¥ –¥—É—Ä—Ç–∞–π. –Ø—Ä–≥—É–π –∏–¥—Å—ç–Ω —è–º–∞–∞ —Å“Ø“Ø –∏—Ö—Ç—ç–π –±–∞–π–¥–∞–≥." }, //
        { title: "–ñ–∏–º—Å–Ω–∏–π –∑—É—É—à", emoji: "ü•ó", text: "–≠—ç–∂ –¥—ç–ª–≥“Ø“Ø—Ä—ç—ç—Å –æ–ª–æ–Ω —Ç”©—Ä–ª–∏–π–Ω –∂–∏–º—Å –∞–≤–ª–∞–∞. –ú”©–Ω—Ö–∂–∏–Ω –∞–ª–∏–º —É–≥–∞–∞–≤. –ê–Ω—É–∂–∏–Ω –≥–∞–¥–∏–ª –∞—Ä–∏–ª–≥–∞–≤. –ñ–∞—Ä–≥–∞–ª–º–∞–∞ –∂“Ø—Ä–∂ —Ö–∞–ª—å—Å–ª–∞–≤. –≠–Ω—Ö–∂–∏–Ω –∂–∏–º—Å—ç—ç —Ç–∞–≤–∞–≥–ª–∞–≤. –¢—ç–¥ —ç—ç–∂–¥—ç—ç —Å–∞–π–Ω —Ç—É—Å–∞–ª–∂—ç—ç. –≠—ç–∂ –Ω—å –∂–∏–º—Å–Ω–∏–π –∑—É—É—à —Ö–∏–π–≤. –ë“Ø–≥–¥ –∞–º—Ç–∞—Ä—Ö–∞–Ω –∏–¥—ç–≤." }, //
        { title: "–£–≥–∂", emoji: "üçº", text: "–•–∞–≤–∞—Ä –±–æ–ª–ª–æ–æ. –ú–∞–ª —Ç”©–ª–ª”©–∂ —ç—Ö–ª—ç–≤. –î–æ—Ä–∂ —Ç”©–ª –º–∞–ª–∞–∞ —É–≥–∂–ª–∞–∞. –•—É—Ä–≥–∞ –∏—à–∏–≥ —É–≥–∂ —Ö”©—Ö”©–∂ —Ü–∞–¥–∞–≤. –ú–∞–ª—ã–Ω —ç–≤—Ä—ç—ç—Ä —É–≥–∂ —Ö–∏–π–¥—ç–≥." }, //
        { title: "–ó–∞—Ä–∞–∞", emoji: "ü¶î", text: "–ó–∞—Ä–∞–∞ –∏—Ö —Ç–∞–π–≤–∞–Ω –∞–º—å—Ç–∞–Ω. –ò—Ö—ç–Ω—Ö –∑–∞—Ä–∞–∞ ”©–¥”©—Ä “Ø“Ø—Ä—ç–Ω–¥—ç—ç —É–Ω—Ç–∞–Ω–∞. –ó–∞—Ä–∏–º–¥–∞–∞ –∑“Ø–ª–≥—ç–Ω –¥—ç—ç—Ä —É–Ω—Ç–∞–Ω–∞. –ó–∞—Ä–∏–º–¥–∞–∞ —Ö–∞–¥–Ω—ã –¥–æ—Ä —É–Ω—Ç–∞–Ω–∞. –®”©–Ω”© –∑”©”©–ª”©–Ω –∑”©”©–ª”©–Ω –∞–ª—Ö–∞–Ω –∏–¥—ç—à —Ö–æ–æ–ª–æ–æ —Ö–∞–π–¥–∞–≥. –ù“Ø–¥ –Ω—å –º—É—É —Ö–∞—Ä–¥–∞–≥. –•–∞—Ä–∏–Ω “Ø–Ω—ç—Ä–ª—ç—Ö –±–æ–ª–æ–Ω —Å–æ–Ω—Å–æ—Ö–¥–æ–æ –∏—Ö —Å–∞–π–Ω." }, //
        { title: "–ê–∞–ª–∑", emoji: "üï∑Ô∏è", text: "–ê–∞–ª–∑ –±–æ–ª –Ω–∞–π–º–∞–Ω –Ω“Ø–¥—Ç—ç–π, –Ω–∞–π–º–∞–Ω —Ö”©–ª—Ç—ç–π —Ö–æ—Ä—Ö–æ–π. –ê–∞–ª–∑ —à“Ø–ª—Å—ç—ç—Ä—ç—ç —Ç–æ—Ä –Ω—ç—Ö–Ω—ç. –¢–æ—Ä–æ–Ω–¥–æ–æ –æ—Ä—Å–æ–Ω —Ö–æ—Ä—Ö–æ–π–≥ –∏–¥–¥—ç–≥. –ú–∞–Ω–∞–π –æ—Ä–æ–Ω–¥ –æ–ª–æ–Ω —Ç”©—Ä–ª–∏–π–Ω –∞–∞–ª–∑ –±–∏–π." }, //
        { title: "–ù–∞–≤—á", emoji: "üçÇ", text: "–ù–∞–º–∞—Ä –±–æ–ª–ª–æ–æ. –ù–∞–≤—á —É–Ω–∞–≤. –°—É—Ä–∞–≥—á–∏–¥ –æ–ª–æ–Ω —Ç”©—Ä–ª–∏–π–Ω –Ω–∞–≤—á —Ç“Ø“Ø–≤. –ù–∞–≤—á–∞–∞—Ä –Ω–∞–∞–º–∞–ª —Ö–∏–π–ª—ç—ç. –ß—É–ª—É—É–Ω, –£—á—Ä–∞–ª, –û—á –Ω–∞—Ä—ã–Ω –Ω–∞–∞–º–∞–ª –∏–ª“Ø“Ø —Å–∞–π—Ö–∞–Ω –±–æ–ª–æ–≤." } //
    ];

    let totalScore = 0;
    let selectedWordElement = null;
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'mn-MN';

    function initMenu() {
        const menu = document.getElementById('menu');
        menu.innerHTML = '';
        allStories.forEach((story, index) => {
            const card = document.createElement('div');
            card.className = 'book-card';
            card.onclick = () => loadStory(index);
            card.innerHTML = `<span class="book-emoji">${story.emoji}</span><div class="book-title">${index + 1}. ${story.title}</div>`;
            menu.appendChild(card);
        });
    }

    function loadStory(index) {
        document.getElementById('menu').style.display = 'none';
        document.getElementById('reader').style.display = 'block';
        const story = allStories[index];
        
        // –ì–∞—Ä—á–≥–∏–π–≥ —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö –±–∞ –¥–∞—Ä–∞—Ö–∞–¥ —É–Ω—à–∏—Ö —Ñ—É–Ω–∫—Ü –Ω—ç–º—ç—Ö
        const titleEl = document.getElementById('reader-title');
        titleEl.innerText = story.title;
        titleEl.onclick = () => playVoice(story.title, titleEl);
        
        const content = document.getElementById('reader-content');
        content.innerHTML = '';
        
        story.text.split(' ').forEach(word => {
            const span = document.createElement('span');
            span.className = 'word';
            span.innerText = word + ' ';
            span.onclick = () => { 
                selectedWordElement = span; 
                playVoice(word, span); 
            };
            content.appendChild(span);
        });
    }

    function showMenu() {
        document.getElementById('menu').style.display = 'grid';
        document.getElementById('reader').style.display = 'none';
        window.speechSynthesis.cancel();
    }

    function playVoice(w, el) {
        window.speechSynthesis.cancel();
        document.querySelectorAll('.word.playing').forEach(e => e.classList.remove('playing'));
        el.classList.add('playing');
        
        const cleanWord = w.replace(/[.,-?]/g,"").trim();
        const utterance = new SpeechSynthesisUtterance(cleanWord + ".");
        
        const voices = window.speechSynthesis.getVoices();
        const yesui = voices.find(v => v.name.includes('Yesui'));
        if (yesui) utterance.voice = yesui;
        
        utterance.lang = 'mn-MN';
        utterance.rate = 0.8;
        utterance.onend = () => el.classList.remove('playing');
        window.speechSynthesis.speak(utterance);
    }

    function startListening() {
        if(!selectedWordElement) return alert("“Æ–≥ –¥—ç—ç—Ä –¥–∞—Ä–∂ —Å–æ–Ω—Å–æ–æ—Ä–æ–π!");
        recognition.start();
        document.getElementById('mic-btn').classList.add('active');
        document.getElementById('status').innerText = "–°–æ–Ω—Å–æ–∂ –±–∞–π–Ω–∞...";
    }

    recognition.onresult = (e) => {
        const result = e.results[0][0].transcript.toLowerCase().trim();
        const target = selectedWordElement.innerText.toLowerCase().trim().replace(/[.,-?]/g,"");
        document.getElementById('mic-btn').classList.remove('active');
        
        if(result.includes(target) || target.includes(result)) {
            selectedWordElement.classList.add('correct');
            totalScore += 10;
            document.getElementById('total-score').innerText = totalScore;
            document.getElementById('status').innerText = "–ú–∞—à —Å–∞–π–Ω! üéâ";
        } else {
            document.getElementById('status').innerText = "–î–∞—Ö–∏–∞–¥ —Ç–æ–¥ —Ö—ç–ª—ç—ç—Ä—ç–π!";
        }
    };

    initMenu();
    window.speechSynthesis.onvoiceschanged = () => {
        window.speechSynthesis.getVoices();
    };
</script>
</body>
</html>
